# GitHub大文件上传指南

## 🚫 **问题说明**
你的项目中有以下大文件：
- `sam_vit_h_4b8939.pth` (2.4GB) - SAM模型
- `yolov8n.pt` (6.5MB) - YOLOv8模型
- 各种Stable Diffusion模型文件

## 💡 **推荐解决方案**

### 方案1: Git LFS (最推荐)

#### 步骤1: 安装Git LFS
```bash
# 重启PowerShell后执行
git lfs install
```

#### 步骤2: 配置跟踪文件
```bash
# 跟踪模型文件
git lfs track "*.pth"
git lfs track "*.pt"
git lfs track "*.safetensors"
git lfs track "*.bin"
git lfs track "*.h5"
git lfs track "*.pkl"

# 添加.gitattributes文件
git add .gitattributes
git commit -m "Configure Git LFS tracking"
```

#### 步骤3: 上传文件
```bash
# 添加所有文件
git add .

# 提交
git commit -m "Add rebar detection project with large model files"

# 推送到GitHub
git push origin main
```

### 方案2: 外部存储 + 下载脚本

#### 步骤1: 创建下载脚本
```python
# download_models.py
import os
import requests
from pathlib import Path

def download_model(url, filename):
    """下载模型文件"""
    model_dir = Path("模型与数据")
    model_dir.mkdir(exist_ok=True)
    
    filepath = model_dir / filename
    
    if filepath.exists():
        print(f"✅ {filename} 已存在")
        return
    
    print(f"📥 下载 {filename}...")
    response = requests.get(url, stream=True)
    response.raise_for_status()
    
    with open(filepath, 'wb') as f:
        for chunk in response.iter_content(chunk_size=8192):
            f.write(chunk)
    
    print(f"✅ {filename} 下载完成")

def main():
    """下载所有模型文件"""
    models = {
        "yolov8n.pt": "https://github.com/ultralytics/assets/releases/download/v0.0.0/yolov8n.pt",
        "sam_vit_h_4b8939.pth": "https://dl.fbaipublicfiles.com/segment_anything/sam_vit_h_4b8939.pth"
    }
    
    for filename, url in models.items():
        try:
            download_model(url, filename)
        except Exception as e:
            print(f"❌ 下载 {filename} 失败: {e}")

if __name__ == "__main__":
    main()
```

#### 步骤2: 创建README说明
```markdown
# 钢筋检测项目

## 🚀 快速开始

### 1. 克隆项目
```bash
git clone https://github.com/your-username/rebar-detection.git
cd rebar-detection
```

### 2. 下载模型文件
```bash
python download_models.py
```

### 3. 安装依赖
```bash
pip install -r requirements.txt
```

### 4. 运行项目
```bash
python 图像生成与AI模型/quick_start_diffusion_conda.py --mode rebar_interactive
```

## 📁 项目结构
- `图像生成与AI模型/` - Stable Diffusion和LoRA训练
- `钢筋检测与识别/` - 核心检测算法
- `无人机与激光雷达/` - 激光雷达数据处理
- `BIM与工程管理/` - BIM模型比较
- `技术文档与方案/` - 项目文档
- `模型与数据/` - 模型文件（需要下载）
- `测试与验证/` - 测试脚本

## 📋 模型文件说明
- `yolov8n.pt` (6.5MB) - YOLOv8检测模型
- `sam_vit_h_4b8939.pth` (2.4GB) - SAM分割模型
```

### 方案3: GitHub Releases

#### 步骤1: 创建Release
1. 在GitHub网页上创建Release
2. 上传大文件作为附件
3. 提供下载链接

#### 步骤2: 修改代码引用
```python
# 在代码中添加模型下载逻辑
def download_model_from_release(release_url, filename):
    """从GitHub Release下载模型"""
    # 实现下载逻辑
    pass
```

## 🎯 **推荐操作流程**

### 对于你的项目，我推荐：

1. **使用Git LFS** - 对于yolov8n.pt (6.5MB)
2. **外部存储** - 对于sam_vit_h_4b8939.pth (2.4GB)
3. **创建下载脚本** - 方便用户获取模型文件

### 具体步骤：

```bash
# 1. 初始化Git仓库
git init
git remote add origin https://github.com/your-username/rebar-detection.git

# 2. 设置Git LFS
git lfs install
git lfs track "*.pt"
git lfs track "*.pth"

# 3. 添加文件（排除大模型文件）
echo "模型与数据/sam_vit_h_4b8939.pth" >> .gitignore
echo "模型与数据/yolov8n.pt" >> .gitignore

# 4. 提交代码
git add .
git commit -m "Initial commit: rebar detection project"

# 5. 推送
git push origin main
```

## ⚠️ **注意事项**

1. **Git LFS有存储限制** - 免费账户每月1GB
2. **大文件影响克隆速度** - 考虑使用浅克隆
3. **版本控制** - 大文件变更会占用大量空间
4. **备份策略** - 重要模型文件要有备份

## 🔗 **相关链接**

- [Git LFS官方文档](https://git-lfs.github.com/)
- [GitHub文件大小限制](https://docs.github.com/en/repositories/working-with-files/managing-large-files/about-large-files-on-github)
- [GitHub Releases文档](https://docs.github.com/en/repositories/releasing-projects-on-github/managing-releases-in-a-repository) 